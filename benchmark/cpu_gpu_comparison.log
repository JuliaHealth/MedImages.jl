CUDA available: NVIDIA GeForce RTX 3090
CUDA memory: 23 GB
================================================================================
MedImages.jl GPU Benchmark Suite
================================================================================
Start time: 2026-01-25T11:20:40.393

================================================================================
Benchmark Configuration
================================================================================

Image Sizes:
  xlarge: 1024 x 1024 x 512
  large: 512 x 512 x 256
  small: 128 x 128 x 64
  medium: 256 x 256 x 128

Interpolation Methods:
  - Nearest Neighbor
  - Linear

Spacing Configurations:
  anisotropic_ct: 0.7 x 0.7 x 5.0 mm
  anisotropic_mri: 1.0 x 1.0 x 3.0 mm
  isotropic: 1.0 x 1.0 x 1.0 mm

Resampling Factors:
  downsample_2x: 0.5x
  upsample_1_5x: 1.5x
  downsample_4x: 0.25x

Point Counts: 100000, 1000000

Backends:
  - CPU (GPU: false)
  - CUDA (GPU: true)

Benchmark Settings:
  Samples: 10
  Min time: 2.0s
  Warmup iterations: 3

Output:
  Results directory: benchmark_results
  Compare SimpleITK: true
================================================================================
Creating synthetic test images...
  Creating xlarge image: 1024x1024x512
  Creating large image: 512x512x256
  Creating medium image: 256x256x128

================================================================================
Starting Benchmark Suite
================================================================================
Operations: all
Backends: cpu, cuda
================================================================================

================================================================================
Image Size: xlarge (1024x1024x512)
================================================================================

--------------------------------------------------------------------------------
Backend: CPU
--------------------------------------------------------------------------------

### Interpolation Kernel Benchmarks ###

Benchmarking interpolate_kernel: CPU backend, 100000 points, Nearest interpolation
  Running benchmark...
  Time: 0.644 ms (median), 1.199 ms (mean), 1.005 ms (std)
  Throughput: 1.55e+08 points/sec
  Memory: 0.4 MB

Benchmarking interpolate_kernel: CPU backend, 100000 points, Linear interpolation
  Running benchmark...
  Time: 4.984 ms (median), 5.221 ms (mean), 0.679 ms (std)
  Throughput: 2.01e+07 points/sec
  Memory: 0.4 MB

Benchmarking interpolate_kernel: CPU backend, 1000000 points, Nearest interpolation
  Running benchmark...
  Time: 23.547 ms (median), 23.578 ms (mean), 0.484 ms (std)
  Throughput: 4.25e+07 points/sec
  Memory: 3.8 MB

Benchmarking interpolate_kernel: CPU backend, 1000000 points, Linear interpolation
  Running benchmark...
  Time: 51.661 ms (median), 52.378 ms (mean), 2.315 ms (std)
  Throughput: 1.94e+07 points/sec
  Memory: 3.8 MB

### Resampling Benchmarks ###

Benchmarking resample_to_spacing: CPU backend, downsample 0.50x, Nearest interpolation
  Running benchmark...
  Input dims: 1024x1024x512
  Output dims: 512x512x256
  Time: 423.284 ms (median), 421.367 ms (mean), 6.881 ms (std)
  Throughput: 1.27e+09 voxels/sec
  Memory: 256.0 MB

Benchmarking resample_to_spacing: CPU backend, downsample 0.50x, Linear interpolation
  Running benchmark...
  Input dims: 1024x1024x512
  Output dims: 512x512x256
  Time: 649.450 ms (median), 649.466 ms (mean), 2.556 ms (std)
  Throughput: 8.27e+08 voxels/sec
  Memory: 256.0 MB
  Skipping upsampling (upsample_1_5x) for xlarge to avoid OOM

Benchmarking resample_to_spacing: CPU backend, downsample 0.25x, Nearest interpolation
  Running benchmark...
  Input dims: 1024x1024x512
  Output dims: 256x256x128
  Time: 54.794 ms (median), 54.655 ms (mean), 1.983 ms (std)
  Throughput: 9.80e+09 voxels/sec
  Memory: 32.0 MB

Benchmarking resample_to_spacing: CPU backend, downsample 0.25x, Linear interpolation
  Running benchmark...
  Input dims: 1024x1024x512
  Output dims: 256x256x128
  Time: 85.521 ms (median), 85.713 ms (mean), 2.013 ms (std)
  Throughput: 6.28e+09 voxels/sec
  Memory: 32.0 MB

### Rotation Benchmarks ###

Benchmarking rotate_mi: CPU backend, 90 degrees
  Running benchmark...
  Time: 57769.520 ms (median), 57769.520 ms (mean), 0.000 ms (std)
  Throughput: 9.29e+06 voxels/sec
  Memory: 81920.0 MB

Benchmarking rotate_mi: CPU backend, 180 degrees
  Running benchmark...
  Time: 59494.127 ms (median), 59494.127 ms (mean), 0.000 ms (std)
  Throughput: 9.02e+06 voxels/sec
  Memory: 81920.0 MB

Benchmarking rotate_mi: CPU backend, 270 degrees
  Running benchmark...
  Time: 57482.439 ms (median), 57482.439 ms (mean), 0.000 ms (std)
  Throughput: 9.34e+06 voxels/sec
  Memory: 81920.0 MB

### Crop Benchmarks ###

Benchmarking crop_mi: CPU backend, 10.0% crop
  Running benchmark...
  Time: 0.000 ms (median), 0.000 ms (mean), 0.000 ms (std)
  Throughput: 1.23e+15 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CPU backend, 50.0% crop
  Running benchmark...
  Time: 0.000 ms (median), 0.000 ms (mean), 0.000 ms (std)
  Throughput: 1.22e+15 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CPU backend, 30.0% crop
  Running benchmark...
  Time: 0.000 ms (median), 0.000 ms (mean), 0.000 ms (std)
  Throughput: 1.30e+15 voxels/sec
  Memory: 0.0 MB

### Pad Benchmarks ###

Benchmarking pad_mi: CPU backend, 10.0% pad
  Running benchmark...
  Time: 3410.953 ms (median), 3410.953 ms (mean), 0.000 ms (std)
  Throughput: 1.57e+08 voxels/sec
  Memory: 8136.0 MB

Benchmarking pad_mi: CPU backend, 50.0% pad
  Running benchmark...
  Time: 7448.538 ms (median), 7448.538 ms (mean), 0.000 ms (std)
  Throughput: 7.21e+07 voxels/sec
  Memory: 19456.0 MB

Benchmarking pad_mi: CPU backend, 30.0% pad
  Running benchmark...
  Time: 5201.580 ms (median), 5201.580 ms (mean), 0.000 ms (std)
  Throughput: 1.03e+08 voxels/sec
  Memory: 13096.4 MB

### Orientation Change Benchmarks ###

Benchmarking change_orientation: CPU backend, target: ORIENTATION_LAS
  Running benchmark...
  Time: 1008.869 ms (median), 974.128 ms (mean), 67.278 ms (std)
  Throughput: 5.32e+08 voxels/sec
  Memory: 2048.0 MB

Benchmarking change_orientation: CPU backend, target: ORIENTATION_RAS
  Running benchmark...
  Time: 1021.179 ms (median), 995.784 ms (mean), 56.524 ms (std)
  Throughput: 5.26e+08 voxels/sec
  Memory: 2048.0 MB

Benchmarking change_orientation: CPU backend, target: ORIENTATION_RPI
  Running benchmark...
  Time: 1040.320 ms (median), 1040.320 ms (mean), 59.666 ms (std)
  Throughput: 5.16e+08 voxels/sec
  Memory: 2048.0 MB

--------------------------------------------------------------------------------
Backend: CUDA
--------------------------------------------------------------------------------

### Interpolation Kernel Benchmarks ###

Benchmarking interpolate_kernel: CUDA backend, 100000 points, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.027 ms (median), 0.078 ms (mean), 0.160 ms (std)
  Throughput: 3.70e+09 points/sec
  Memory: 0.0 MB

Benchmarking interpolate_kernel: CUDA backend, 100000 points, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.108 ms (median), 0.196 ms (mean), 0.215 ms (std)
  Throughput: 9.27e+08 points/sec
  Memory: 0.0 MB

Benchmarking interpolate_kernel: CUDA backend, 1000000 points, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.205 ms (median), 0.220 ms (mean), 0.054 ms (std)
  Throughput: 4.89e+09 points/sec
  Memory: 0.0 MB

Benchmarking interpolate_kernel: CUDA backend, 1000000 points, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.788 ms (median), 0.858 ms (mean), 0.141 ms (std)
  Throughput: 1.27e+09 points/sec
  Memory: 0.0 MB

### Resampling Benchmarks ###

Benchmarking resample_to_spacing: CUDA backend, downsample 0.50x, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 1024x1024x512
  Output dims: 512x512x256
  Time: 2.945 ms (median), 2.979 ms (mean), 0.079 ms (std)
  Throughput: 1.82e+11 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, downsample 0.50x, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 1024x1024x512
  Output dims: 512x512x256
  Time: 4.357 ms (median), 4.371 ms (mean), 0.081 ms (std)
  Throughput: 1.23e+11 voxels/sec
  Memory: 0.0 MB
  Skipping upsampling (upsample_1_5x) for xlarge to avoid OOM

Benchmarking resample_to_spacing: CUDA backend, downsample 0.25x, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 1024x1024x512
  Output dims: 256x256x128
  Time: 0.373 ms (median), 0.387 ms (mean), 0.031 ms (std)
  Throughput: 1.44e+12 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, downsample 0.25x, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 1024x1024x512
  Output dims: 256x256x128
  Time: 0.785 ms (median), 0.785 ms (mean), 0.079 ms (std)
  Throughput: 6.84e+11 voxels/sec
  Memory: 0.0 MB

### Rotation Benchmarks ###

Benchmarking rotate_mi: CUDA backend, 90 degrees
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 58097.353 ms (median), 58097.353 ms (mean), 0.000 ms (std)
  Throughput: 9.24e+06 voxels/sec
  Memory: 83968.0 MB

Benchmarking rotate_mi: CUDA backend, 180 degrees
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 58791.948 ms (median), 58791.948 ms (mean), 0.000 ms (std)
  Throughput: 9.13e+06 voxels/sec
  Memory: 83968.0 MB

Benchmarking rotate_mi: CUDA backend, 270 degrees
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 59763.386 ms (median), 59763.386 ms (mean), 0.000 ms (std)
  Throughput: 8.98e+06 voxels/sec
  Memory: 83968.0 MB

### Crop Benchmarks ###

Benchmarking crop_mi: CUDA backend, 10.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 6.24e+14 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CUDA backend, 50.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 6.31e+14 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CUDA backend, 30.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 6.33e+14 voxels/sec
  Memory: 0.0 MB

### Pad Benchmarks (skipped - CUDA scalar indexing not supported) ###

### Orientation Change Benchmarks ###

Benchmarking change_orientation: CUDA backend, target: ORIENTATION_LAS
  Running benchmark...
  Time: 5.608 ms (median), 5.650 ms (mean), 0.181 ms (std)
  Throughput: 9.57e+10 voxels/sec
  Memory: 0.0 MB

Benchmarking change_orientation: CUDA backend, target: ORIENTATION_RAS
  Running benchmark...
  Time: 5.615 ms (median), 5.675 ms (mean), 0.179 ms (std)
  Throughput: 9.56e+10 voxels/sec
  Memory: 0.0 MB

Benchmarking change_orientation: CUDA backend, target: ORIENTATION_RPI
  Running benchmark...
  Time: 5.603 ms (median), 5.721 ms (mean), 0.254 ms (std)
  Throughput: 9.58e+10 voxels/sec
  Memory: 0.0 MB

================================================================================
Image Size: large (512x512x256)
================================================================================

--------------------------------------------------------------------------------
Backend: CPU
--------------------------------------------------------------------------------

### Interpolation Kernel Benchmarks ###

Benchmarking interpolate_kernel: CPU backend, 100000 points, Nearest interpolation
  Running benchmark...
  Time: 0.567 ms (median), 0.867 ms (mean), 0.638 ms (std)
  Throughput: 1.76e+08 points/sec
  Memory: 0.4 MB

Benchmarking interpolate_kernel: CPU backend, 100000 points, Linear interpolation
  Running benchmark...
  Time: 4.698 ms (median), 4.721 ms (mean), 0.205 ms (std)
  Throughput: 2.13e+07 points/sec
  Memory: 0.4 MB

Benchmarking interpolate_kernel: CPU backend, 1000000 points, Nearest interpolation
  Running benchmark...
  Time: 23.329 ms (median), 23.303 ms (mean), 1.054 ms (std)
  Throughput: 4.29e+07 points/sec
  Memory: 3.8 MB

Benchmarking interpolate_kernel: CPU backend, 1000000 points, Linear interpolation
  Running benchmark...
  Time: 47.425 ms (median), 47.349 ms (mean), 0.716 ms (std)
  Throughput: 2.11e+07 points/sec
  Memory: 3.8 MB

### Resampling Benchmarks ###

Benchmarking resample_to_spacing: CPU backend, downsample 0.50x, Nearest interpolation
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 256x256x128
  Time: 55.181 ms (median), 55.391 ms (mean), 1.859 ms (std)
  Throughput: 1.22e+09 voxels/sec
  Memory: 32.0 MB

Benchmarking resample_to_spacing: CPU backend, downsample 0.50x, Linear interpolation
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 256x256x128
  Time: 83.884 ms (median), 84.125 ms (mean), 2.093 ms (std)
  Throughput: 8.00e+08 voxels/sec
  Memory: 32.0 MB

Benchmarking resample_to_spacing: CPU backend, upsample 1.50x, Nearest interpolation
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 768x768x384
  Time: 1395.115 ms (median), 1395.115 ms (mean), 23.946 ms (std)
  Throughput: 4.81e+07 voxels/sec
  Memory: 864.0 MB

Benchmarking resample_to_spacing: CPU backend, upsample 1.50x, Linear interpolation
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 768x768x384
  Time: 2115.677 ms (median), 2115.677 ms (mean), 0.000 ms (std)
  Throughput: 3.17e+07 voxels/sec
  Memory: 864.0 MB

Benchmarking resample_to_spacing: CPU backend, downsample 0.25x, Nearest interpolation
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 128x128x64
  Time: 7.267 ms (median), 7.203 ms (mean), 0.248 ms (std)
  Throughput: 9.23e+09 voxels/sec
  Memory: 4.0 MB

Benchmarking resample_to_spacing: CPU backend, downsample 0.25x, Linear interpolation
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 128x128x64
  Time: 11.240 ms (median), 11.119 ms (mean), 0.296 ms (std)
  Throughput: 5.97e+09 voxels/sec
  Memory: 4.0 MB

### Rotation Benchmarks ###

Benchmarking rotate_mi: CPU backend, 90 degrees
  Running benchmark...
  Time: 7739.459 ms (median), 7739.459 ms (mean), 0.000 ms (std)
  Throughput: 8.67e+06 voxels/sec
  Memory: 10240.0 MB

Benchmarking rotate_mi: CPU backend, 180 degrees
  Running benchmark...
  Time: 7796.866 ms (median), 7796.866 ms (mean), 0.000 ms (std)
  Throughput: 8.61e+06 voxels/sec
  Memory: 10240.0 MB

Benchmarking rotate_mi: CPU backend, 270 degrees
  Running benchmark...
  Time: 7506.134 ms (median), 7506.134 ms (mean), 0.000 ms (std)
  Throughput: 8.94e+06 voxels/sec
  Memory: 10240.0 MB

### Crop Benchmarks ###

Benchmarking crop_mi: CPU backend, 10.0% crop
  Running benchmark...
  Time: 0.000 ms (median), 0.000 ms (mean), 0.000 ms (std)
  Throughput: 1.46e+14 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CPU backend, 50.0% crop
  Running benchmark...
  Time: 0.000 ms (median), 0.000 ms (mean), 0.000 ms (std)
  Throughput: 1.48e+14 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CPU backend, 30.0% crop
  Running benchmark...
  Time: 0.000 ms (median), 0.000 ms (mean), 0.000 ms (std)
  Throughput: 1.47e+14 voxels/sec
  Memory: 0.0 MB

### Pad Benchmarks ###

Benchmarking pad_mi: CPU backend, 10.0% pad
  Running benchmark...
  Time: 393.541 ms (median), 397.290 ms (mean), 23.034 ms (std)
  Throughput: 1.71e+08 voxels/sec
  Memory: 1021.0 MB

Benchmarking pad_mi: CPU backend, 50.0% pad
  Running benchmark...
  Time: 1112.296 ms (median), 1112.296 ms (mean), 57.823 ms (std)
  Throughput: 6.03e+07 voxels/sec
  Memory: 2432.0 MB

Benchmarking pad_mi: CPU backend, 30.0% pad
  Running benchmark...
  Time: 814.130 ms (median), 803.071 ms (mean), 34.219 ms (std)
  Throughput: 8.24e+07 voxels/sec
  Memory: 1633.7 MB

### Orientation Change Benchmarks ###

Benchmarking change_orientation: CPU backend, target: ORIENTATION_LAS
  Running benchmark...
  Time: 120.127 ms (median), 120.224 ms (mean), 2.278 ms (std)
  Throughput: 5.59e+08 voxels/sec
  Memory: 256.0 MB

Benchmarking change_orientation: CPU backend, target: ORIENTATION_RAS
  Running benchmark...
  Time: 131.046 ms (median), 130.307 ms (mean), 5.729 ms (std)
  Throughput: 5.12e+08 voxels/sec
  Memory: 256.0 MB

Benchmarking change_orientation: CPU backend, target: ORIENTATION_RPI
  Running benchmark...
  Time: 143.671 ms (median), 142.436 ms (mean), 4.686 ms (std)
  Throughput: 4.67e+08 voxels/sec
  Memory: 256.0 MB

--------------------------------------------------------------------------------
Backend: CUDA
--------------------------------------------------------------------------------

### Interpolation Kernel Benchmarks ###

Benchmarking interpolate_kernel: CUDA backend, 100000 points, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.028 ms (median), 0.037 ms (mean), 0.030 ms (std)
  Throughput: 3.63e+09 points/sec
  Memory: 0.0 MB

Benchmarking interpolate_kernel: CUDA backend, 100000 points, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.131 ms (median), 0.164 ms (mean), 0.087 ms (std)
  Throughput: 7.63e+08 points/sec
  Memory: 0.0 MB

Benchmarking interpolate_kernel: CUDA backend, 1000000 points, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.166 ms (median), 0.200 ms (mean), 0.069 ms (std)
  Throughput: 6.03e+09 points/sec
  Memory: 0.0 MB

Benchmarking interpolate_kernel: CUDA backend, 1000000 points, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.743 ms (median), 0.770 ms (mean), 0.062 ms (std)
  Throughput: 1.35e+09 points/sec
  Memory: 0.0 MB

### Resampling Benchmarks ###

Benchmarking resample_to_spacing: CUDA backend, downsample 0.50x, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 256x256x128
  Time: 0.380 ms (median), 0.392 ms (mean), 0.030 ms (std)
  Throughput: 1.77e+11 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, downsample 0.50x, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 256x256x128
  Time: 0.564 ms (median), 0.580 ms (mean), 0.057 ms (std)
  Throughput: 1.19e+11 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, upsample 1.50x, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 768x768x384
  Time: 9.892 ms (median), 9.895 ms (mean), 0.065 ms (std)
  Throughput: 6.78e+09 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, upsample 1.50x, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 768x768x384
  Time: 14.661 ms (median), 14.691 ms (mean), 0.063 ms (std)
  Throughput: 4.58e+09 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, downsample 0.25x, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 128x128x64
  Time: 0.057 ms (median), 0.068 ms (mean), 0.024 ms (std)
  Throughput: 1.17e+12 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, downsample 0.25x, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 512x512x256
  Output dims: 128x128x64
  Time: 0.202 ms (median), 0.191 ms (mean), 0.068 ms (std)
  Throughput: 3.32e+11 voxels/sec
  Memory: 0.0 MB

### Rotation Benchmarks ###

Benchmarking rotate_mi: CUDA backend, 90 degrees
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 7637.809 ms (median), 7637.809 ms (mean), 0.000 ms (std)
  Throughput: 8.79e+06 voxels/sec
  Memory: 10496.0 MB

Benchmarking rotate_mi: CUDA backend, 180 degrees
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 7681.452 ms (median), 7681.452 ms (mean), 0.000 ms (std)
  Throughput: 8.74e+06 voxels/sec
  Memory: 10496.0 MB

Benchmarking rotate_mi: CUDA backend, 270 degrees
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 7563.080 ms (median), 7563.080 ms (mean), 0.000 ms (std)
  Throughput: 8.87e+06 voxels/sec
  Memory: 10496.0 MB

### Crop Benchmarks ###

Benchmarking crop_mi: CUDA backend, 10.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 7.87e+13 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CUDA backend, 50.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 7.69e+13 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CUDA backend, 30.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 7.80e+13 voxels/sec
  Memory: 0.0 MB

### Pad Benchmarks (skipped - CUDA scalar indexing not supported) ###

### Orientation Change Benchmarks ###

Benchmarking change_orientation: CUDA backend, target: ORIENTATION_LAS
  Running benchmark...
  Time: 0.710 ms (median), 0.768 ms (mean), 0.092 ms (std)
  Throughput: 9.45e+10 voxels/sec
  Memory: 0.0 MB

Benchmarking change_orientation: CUDA backend, target: ORIENTATION_RAS
  Running benchmark...
  Time: 0.838 ms (median), 0.861 ms (mean), 0.110 ms (std)
  Throughput: 8.01e+10 voxels/sec
  Memory: 0.0 MB

Benchmarking change_orientation: CUDA backend, target: ORIENTATION_RPI
  Running benchmark...
  Time: 0.793 ms (median), 0.786 ms (mean), 0.068 ms (std)
  Throughput: 8.46e+10 voxels/sec
  Memory: 0.0 MB

================================================================================
Image Size: medium (256x256x128)
================================================================================

--------------------------------------------------------------------------------
Backend: CPU
--------------------------------------------------------------------------------

### Interpolation Kernel Benchmarks ###

Benchmarking interpolate_kernel: CPU backend, 100000 points, Nearest interpolation
  Running benchmark...
  Time: 0.460 ms (median), 0.795 ms (mean), 0.649 ms (std)
  Throughput: 2.17e+08 points/sec
  Memory: 0.4 MB

Benchmarking interpolate_kernel: CPU backend, 100000 points, Linear interpolation
  Running benchmark...
  Time: 2.760 ms (median), 2.840 ms (mean), 0.668 ms (std)
  Throughput: 3.62e+07 points/sec
  Memory: 0.4 MB

Benchmarking interpolate_kernel: CPU backend, 1000000 points, Nearest interpolation
  Running benchmark...
  Time: 17.189 ms (median), 17.108 ms (mean), 0.689 ms (std)
  Throughput: 5.82e+07 points/sec
  Memory: 3.8 MB

Benchmarking interpolate_kernel: CPU backend, 1000000 points, Linear interpolation
  Running benchmark...
  Time: 34.205 ms (median), 35.935 ms (mean), 3.429 ms (std)
  Throughput: 2.92e+07 points/sec
  Memory: 3.8 MB

### Resampling Benchmarks ###

Benchmarking resample_to_spacing: CPU backend, downsample 0.50x, Nearest interpolation
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 128x128x64
  Time: 7.127 ms (median), 7.047 ms (mean), 0.277 ms (std)
  Throughput: 1.18e+09 voxels/sec
  Memory: 4.0 MB

Benchmarking resample_to_spacing: CPU backend, downsample 0.50x, Linear interpolation
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 128x128x64
  Time: 10.562 ms (median), 10.501 ms (mean), 0.321 ms (std)
  Throughput: 7.94e+08 voxels/sec
  Memory: 4.0 MB

Benchmarking resample_to_spacing: CPU backend, upsample 1.50x, Nearest interpolation
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 384x384x192
  Time: 174.743 ms (median), 174.558 ms (mean), 1.989 ms (std)
  Throughput: 4.80e+07 voxels/sec
  Memory: 108.0 MB

Benchmarking resample_to_spacing: CPU backend, upsample 1.50x, Linear interpolation
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 384x384x192
  Time: 266.770 ms (median), 267.708 ms (mean), 2.984 ms (std)
  Throughput: 3.14e+07 voxels/sec
  Memory: 108.0 MB

Benchmarking resample_to_spacing: CPU backend, downsample 0.25x, Nearest interpolation
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 64x64x32
  Time: 0.700 ms (median), 0.742 ms (mean), 0.088 ms (std)
  Throughput: 1.20e+10 voxels/sec
  Memory: 0.5 MB

Benchmarking resample_to_spacing: CPU backend, downsample 0.25x, Linear interpolation
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 64x64x32
  Time: 1.251 ms (median), 1.299 ms (mean), 0.112 ms (std)
  Throughput: 6.71e+09 voxels/sec
  Memory: 0.5 MB

### Rotation Benchmarks ###

Benchmarking rotate_mi: CPU backend, 90 degrees
  Running benchmark...
  Time: 1024.119 ms (median), 1023.829 ms (mean), 6.805 ms (std)
  Throughput: 8.19e+06 voxels/sec
  Memory: 1280.0 MB

Benchmarking rotate_mi: CPU backend, 180 degrees
  Running benchmark...
  Time: 1045.326 ms (median), 1045.626 ms (mean), 1.455 ms (std)
  Throughput: 8.02e+06 voxels/sec
  Memory: 1280.0 MB

Benchmarking rotate_mi: CPU backend, 270 degrees
  Running benchmark...
  Time: 1033.242 ms (median), 1027.468 ms (mean), 12.000 ms (std)
  Throughput: 8.12e+06 voxels/sec
  Memory: 1280.0 MB

### Crop Benchmarks ###

Benchmarking crop_mi: CPU backend, 10.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 1.63e+13 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CPU backend, 50.0% crop
  Running benchmark...
  Time: 0.000 ms (median), 0.000 ms (mean), 0.000 ms (std)
  Throughput: 1.80e+13 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CPU backend, 30.0% crop
  Running benchmark...
  Time: 0.000 ms (median), 0.000 ms (mean), 0.000 ms (std)
  Throughput: 1.80e+13 voxels/sec
  Memory: 0.0 MB

### Pad Benchmarks ###

Benchmarking pad_mi: CPU backend, 10.0% pad
  Running benchmark...
  Time: 51.037 ms (median), 50.868 ms (mean), 0.717 ms (std)
  Throughput: 1.64e+08 voxels/sec
  Memory: 127.0 MB

Benchmarking pad_mi: CPU backend, 50.0% pad
  Running benchmark...
  Time: 123.732 ms (median), 123.653 ms (mean), 1.679 ms (std)
  Throughput: 6.78e+07 voxels/sec
  Memory: 304.0 MB

Benchmarking pad_mi: CPU backend, 30.0% pad
  Running benchmark...
  Time: 76.482 ms (median), 76.084 ms (mean), 1.336 ms (std)
  Throughput: 1.10e+08 voxels/sec
  Memory: 202.9 MB

### Orientation Change Benchmarks ###

Benchmarking change_orientation: CPU backend, target: ORIENTATION_LAS
  Running benchmark...
  Time: 11.686 ms (median), 11.814 ms (mean), 5.836 ms (std)
  Throughput: 7.18e+08 voxels/sec
  Memory: 32.0 MB

Benchmarking change_orientation: CPU backend, target: ORIENTATION_RAS
  Running benchmark...
  Time: 11.431 ms (median), 11.922 ms (mean), 5.676 ms (std)
  Throughput: 7.34e+08 voxels/sec
  Memory: 32.0 MB

Benchmarking change_orientation: CPU backend, target: ORIENTATION_RPI
  Running benchmark...
  Time: 13.896 ms (median), 14.215 ms (mean), 5.810 ms (std)
  Throughput: 6.04e+08 voxels/sec
  Memory: 32.0 MB

--------------------------------------------------------------------------------
Backend: CUDA
--------------------------------------------------------------------------------

### Interpolation Kernel Benchmarks ###

Benchmarking interpolate_kernel: CUDA backend, 100000 points, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.024 ms (median), 0.050 ms (mean), 0.083 ms (std)
  Throughput: 4.20e+09 points/sec
  Memory: 0.0 MB

Benchmarking interpolate_kernel: CUDA backend, 100000 points, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.103 ms (median), 0.151 ms (mean), 0.088 ms (std)
  Throughput: 9.73e+08 points/sec
  Memory: 0.0 MB

Benchmarking interpolate_kernel: CUDA backend, 1000000 points, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.141 ms (median), 0.165 ms (mean), 0.053 ms (std)
  Throughput: 7.09e+09 points/sec
  Memory: 0.0 MB

Benchmarking interpolate_kernel: CUDA backend, 1000000 points, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 0.582 ms (median), 0.599 ms (mean), 0.054 ms (std)
  Throughput: 1.72e+09 points/sec
  Memory: 0.0 MB

### Resampling Benchmarks ###

Benchmarking resample_to_spacing: CUDA backend, downsample 0.50x, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 128x128x64
  Time: 0.056 ms (median), 0.066 ms (mean), 0.028 ms (std)
  Throughput: 1.48e+11 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, downsample 0.50x, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 128x128x64
  Time: 0.164 ms (median), 0.166 ms (mean), 0.059 ms (std)
  Throughput: 5.10e+10 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, upsample 1.50x, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 384x384x192
  Time: 1.289 ms (median), 1.317 ms (mean), 0.079 ms (std)
  Throughput: 6.51e+09 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, upsample 1.50x, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 384x384x192
  Time: 1.863 ms (median), 1.895 ms (mean), 0.062 ms (std)
  Throughput: 4.50e+09 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, downsample 0.25x, Nearest interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 64x64x32
  Time: 0.017 ms (median), 0.044 ms (mean), 0.083 ms (std)
  Throughput: 4.83e+11 voxels/sec
  Memory: 0.0 MB

Benchmarking resample_to_spacing: CUDA backend, downsample 0.25x, Linear interpolation
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Input dims: 256x256x128
  Output dims: 64x64x32
  Time: 0.024 ms (median), 0.049 ms (mean), 0.079 ms (std)
  Throughput: 3.54e+11 voxels/sec
  Memory: 0.0 MB

### Rotation Benchmarks ###

Benchmarking rotate_mi: CUDA backend, 90 degrees
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 1043.930 ms (median), 1043.139 ms (mean), 1.966 ms (std)
  Throughput: 8.04e+06 voxels/sec
  Memory: 1312.0 MB

Benchmarking rotate_mi: CUDA backend, 180 degrees
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 1029.561 ms (median), 1029.686 ms (mean), 9.679 ms (std)
  Throughput: 8.15e+06 voxels/sec
  Memory: 1312.0 MB

Benchmarking rotate_mi: CUDA backend, 270 degrees
Warming up GPU...
  GPU warmed up
  Running benchmark...
  Time: 1032.119 ms (median), 1035.852 ms (mean), 19.256 ms (std)
  Throughput: 8.13e+06 voxels/sec
  Memory: 1312.0 MB

### Crop Benchmarks ###

Benchmarking crop_mi: CUDA backend, 10.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 9.33e+12 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CUDA backend, 50.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 1.00e+13 voxels/sec
  Memory: 0.0 MB

Benchmarking crop_mi: CUDA backend, 30.0% crop
  Running benchmark...
  Time: 0.001 ms (median), 0.001 ms (mean), 0.000 ms (std)
  Throughput: 9.83e+12 voxels/sec
  Memory: 0.0 MB

### Pad Benchmarks (skipped - CUDA scalar indexing not supported) ###

### Orientation Change Benchmarks ###

Benchmarking change_orientation: CUDA backend, target: ORIENTATION_LAS
  Running benchmark...
  Time: 0.098 ms (median), 0.113 ms (mean), 0.036 ms (std)
  Throughput: 8.60e+10 voxels/sec
  Memory: 0.0 MB

Benchmarking change_orientation: CUDA backend, target: ORIENTATION_RAS
  Running benchmark...
  Time: 0.100 ms (median), 0.125 ms (mean), 0.046 ms (std)
  Throughput: 8.36e+10 voxels/sec
  Memory: 0.0 MB

Benchmarking change_orientation: CUDA backend, target: ORIENTATION_RPI
  Running benchmark...
  Time: 0.188 ms (median), 0.200 ms (mean), 0.072 ms (std)
  Throughput: 4.46e+10 voxels/sec
  Memory: 0.0 MB

================================================================================
Memory Transfer Benchmarks
================================================================================

Benchmarking memory transfer: (1024, 1024, 512)
  CPU -> GPU transfer...
    Time: 178.697 ms (median)
    Transfer rate: 11460.72 MB/s
  GPU -> CPU transfer...
    Time: 832.675 ms (median)
    Transfer rate: 2459.54 MB/s

================================================================================
Generating Reports
================================================================================
Results saved to: cpu_gpu_comparison/results.csv
   Resolving package versions...
  No Changes to `/workspaces/MedImages.jl/benchmark/Project.toml`
  No Changes to `/workspaces/MedImages.jl/benchmark/Manifest.toml`
   Resolving package versions...
  No Changes to `/workspaces/MedImages.jl/benchmark/Project.toml`
  No Changes to `/workspaces/MedImages.jl/benchmark/Manifest.toml`
   Resolving package versions...
  No Changes to `/workspaces/MedImages.jl/benchmark/Project.toml`
  No Changes to `/workspaces/MedImages.jl/benchmark/Manifest.toml`
  Activating project at `/workspaces/MedImages.jl`
  Activating project at `/workspaces/MedImages.jl/benchmark`
┌ Warning: SimpleITK comparison failed
│   exception =
│    LoadError: PyError (PyImport_ImportModule
│    
│    The Python package SimpleITK could not be imported by pyimport. Usually this means
│    that you did not install SimpleITK in the Python version being used by PyCall.
│    
│    PyCall is currently configured to use the Python version at:
│    
│    /usr/bin/python3
│    
│    and you should use whatever mechanism you usually use (apt-get, pip, conda,
│    etcetera) to install the Python package containing the SimpleITK module.
│    
│    One alternative is to re-configure PyCall to use a different Python
│    version on your system: set ENV["PYTHON"] to the path/name of the python
│    executable you want to use, run Pkg.build("PyCall"), and re-launch Julia.
│    
│    Another alternative is to configure PyCall to use a Julia-specific Python
│    distribution via the Conda.jl package (which installs a private Anaconda
│    Python distribution), which has the advantage that packages can be installed
│    and kept up-to-date via Julia.  As explained in the PyCall documentation,
│    set ENV["PYTHON"]="", run Pkg.build("PyCall"), and re-launch Julia. Then,
│    To install the SimpleITK module, you can use `pyimport_conda("SimpleITK", PKG)`,
│    where PKG is the Anaconda package that contains the module SimpleITK,
│    or alternatively you can use the Conda package directly (via
│    `using Conda` followed by `Conda.add` etcetera).
│    
│    ) <class 'ModuleNotFoundError'>
│    ModuleNotFoundError("No module named 'SimpleITK'")
│    
│    in expression starting at /workspaces/MedImages.jl/benchmark/simpleitk_benchmarks.jl:12
└ @ Main /workspaces/MedImages.jl/benchmark/benchmark_utils.jl:336
Report saved to: cpu_gpu_comparison/report.md

================================================================================
Benchmark Summary
================================================================================

Total benchmarks run: 119
  Interpolation: 24
  Resampling: 32
  Rotation: 18
  Crop: 18
  Pad: 9
  Orientation: 18

Average CUDA Speedups:
  Interpolation: 61.52x (min: 19.29x, max: 140.56x)
  Resampling: 117.04x (min: 40.29x, max: 149.07x)
  Rotation: 1.00x (min: 0.96x, max: 1.02x)
  Crop: 0.53x (min: 0.49x, max: 0.57x)
  Orientation: 151.28x (min: 73.85x, max: 185.67x)
================================================================================

================================================================================
Benchmark Visualization
================================================================================

Interpolation Speedup:
                                         CPU vs CUDA                
                         ┌                                        ┐ 
           1024x1024x512 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 23.8173   
   Speedup   512x512x256 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■ 20.5942       
             256x256x128 ┤■■■■■■■■■■■■■■■■■■■■■■■■■ 19.2943         
                         └                                        ┘ 
                                         Image Size                 

Resampling Speedup:
                                         CPU vs CUDA                
                         ┌                                        ┐ 
           1024x1024x512 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 143.743   
   Speedup   512x512x256 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 145.197   
             256x256x128 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■ 126.154       
                         └                                        ┘ 
                                         Image Size                 

Rotation Speedup:
                                         CPU vs CUDA                
                         ┌                                        ┐ 
           1024x1024x512 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 0.994357   
   Speedup   512x512x256 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 1.01331   
             256x256x128 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 0.981023   
                         └                                        ┘ 
                                         Image Size                 

Crop Speedup:
                                         CPU vs CUDA                
                         ┌                                        ┐ 
           1024x1024x512 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■ 0.508591      
   Speedup   512x512x256 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 0.537936     
             256x256x128 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 0.573301   
                         └                                        ┘ 
                                         Image Size                 

Orientation Speedup:
                                         CPU vs CUDA                
                         ┌                                        ┐ 
           1024x1024x512 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 179.895   
   Speedup   512x512x256 ┤■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 169.133     
             256x256x128 ┤■■■■■■■■■■■■■■■■■■■■■ 119.731             
                         └                                        ┘ 
                                         Image Size                 

================================================================================
SimpleITK Comparison
================================================================================
SimpleITK comparison skipped due to error

================================================================================
Benchmark Complete!
================================================================================
End time: 2026-01-25T11:41:39.401
Results saved to: cpu_gpu_comparison
  - CSV: cpu_gpu_comparison/results.csv
  - Report: cpu_gpu_comparison/report.md
================================================================================
